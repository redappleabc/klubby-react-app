{"ast":null,"code":"import { INTERNAL_ERROR, SERVER_ERROR_CODE_RANGE, RESERVED_ERROR_CODES, STANDARD_ERROR_MAP } from \"./constants\";\nexport function isServerErrorCode(code) {\n  return code <= SERVER_ERROR_CODE_RANGE[0] && code >= SERVER_ERROR_CODE_RANGE[1];\n}\nexport function isReservedErrorCode(code) {\n  return RESERVED_ERROR_CODES.includes(code);\n}\nexport function isValidErrorCode(code) {\n  return typeof code === \"number\";\n}\nexport function getError(type) {\n  if (!Object.keys(STANDARD_ERROR_MAP).includes(type)) {\n    return STANDARD_ERROR_MAP[INTERNAL_ERROR];\n  }\n\n  return STANDARD_ERROR_MAP[type];\n}\nexport function getErrorByCode(code) {\n  var match = Object.values(STANDARD_ERROR_MAP).find(function (e) {\n    return e.code === code;\n  });\n\n  if (!match) {\n    return STANDARD_ERROR_MAP[INTERNAL_ERROR];\n  }\n\n  return match;\n}\nexport function validateJsonRpcError(response) {\n  if (typeof response.error.code === \"undefined\") {\n    return {\n      valid: false,\n      error: \"Missing code for JSON-RPC error\"\n    };\n  }\n\n  if (typeof response.error.message === \"undefined\") {\n    return {\n      valid: false,\n      error: \"Missing message for JSON-RPC error\"\n    };\n  }\n\n  if (!isValidErrorCode(response.error.code)) {\n    return {\n      valid: false,\n      error: \"Invalid error code type for JSON-RPC: \".concat(response.error.code)\n    };\n  }\n\n  if (isReservedErrorCode(response.error.code)) {\n    var error = getErrorByCode(response.error.code);\n\n    if (error.message !== STANDARD_ERROR_MAP[INTERNAL_ERROR].message && response.error.message === error.message) {\n      return {\n        valid: false,\n        error: \"Invalid error code message for JSON-RPC: \".concat(response.error.code)\n      };\n    }\n  }\n\n  return {\n    valid: true\n  };\n}\nexport function parseConnectionError(e, url, type) {\n  return e.message.includes(\"getaddrinfo ENOTFOUND\") || e.message.includes(\"connect ECONNREFUSED\") ? new Error(\"Unavailable \".concat(type, \" RPC url at \").concat(url)) : e;\n}","map":null,"metadata":{},"sourceType":"module"}